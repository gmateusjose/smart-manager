{% extends "layout.html" %}

{% block body %}
  <h1>Index page</h1>
  <legend>Retrieve data from:</legend>
  <form action="/" method="post">
 		<select name="month" required>
			<option value="">Month</option>
			{% for month in months %}
				<option value="{{ month }}">{{ month }}</option>
			{% endfor %}
		</select>

		<select name="year" required>
			<option value="">Year</option>
			{% for year in years %}
				<option value="{{ year }}">{{ year }}</option>
			{% endfor %}
		</select>
		<button type="submit">Retrieve</button>
  </form>
	
	{% for professor in professors %}
		<legend>Teacher: {{ professor['name'] }}</legend>
		<table>
			<tr>
				<th>Name</th>
				<th>Payment</th>
				<th>Scholar</th>
				<th>Maint.</th>
				<th>Recep.</th>
				<th>Coord.</th>
				<th>Teacher</th>
				<th>School</th>
			</tr>
			{% for data_row, results_row in zip(professor['data'], professor['results']) %}
				<tr>
					<td>{{ data_row[0] }}</td>
					<td>{{ '${:,.2f}'.format(data_row[1]) }}</td>
					<td>{{ data_row[2] }}</td>
					<td>{{ '${:,.2f}'.format(expenses['maint']) }}</td>
					<td>{{ '${:,.2f}'.format(expenses['recep']) }}</td>
					<td>{{ '${:,.2f}'.format(expenses['coord']) }}</td>
					<td>{{ '${:,.2f}'.format(results_row) }}</td>
					<td>{{ '${:,.2f}'.format(results_row) }}</td>
				</tr>
			{% endfor %}
			</tfoot>
				<th colspan="3">Total</th>
				<th>{{ '${:,.2f}'.format(expenses['maint'] * professor['items']) }}</th>
				<th>{{ '${:,.2f}'.format(expenses['recep'] * professor['items']) }}</th>
				<th>{{ '${:,.2f}'.format(expenses['coord'] * professor['items']) }}</th>
				<th>{{ '${:,.2f}'.format(professor['total']) }}</th>
				<th>{{ '${:,.2f}'.format(professor['total']) }}</th>
			</tfoot>
		</table>
	{% endfor %}

	<script src="{{ url_for('static', filename='index.js') }}"></script>
{% endblock %}
